{% extends 'backpack/layout.html.twig' %}



{% block page_content %}
    {% embed 'widgets/tree-widget.html.twig' %}
        {% block tree_body %}
            {{ include('backpack/_show/_identification.html.twig') }}
            {{ include('backpack/_show/_content.html.twig') }}
            {{ include('backpack/_show/_files.html.twig') }}


        {% endblock %}
    {% endembed %}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ absolute_url( asset('/vendor/split.js/dist/split.min.js')) }}"></script>
    <script>
        $(function () {
            var to = false;
            $('#demo_q').keyup(function () {
                if(to) { clearTimeout(to); }
                to = setTimeout(function () {
                    var v = $('#demo_q').val();
                    $('#tree').jstree(true).search(v);
                }, 250);
            });
            $('#tree').jstree(
                {
                    'core':
                        {
                            'data': treedata
                        },
                    'plugins' : ["search" ]
                }
            ).on('changed.jstree', function (e, data) {
                if (data.node) {
                    document.location = data.node.a_attr.href;
                }
            });
        });
        var sizes = localStorage.getItem('split-sizes')

        if (sizes) {
            sizes = JSON.parse(sizes)
        } else {
            sizes = [25, 75] // default sizes
        }
        Split(['#tree_left', '#tree_right']
            , {
                sizes: sizes,
                onDragEnd: function(sizes) {
                    localStorage.setItem('split-sizes', JSON.stringify(sizes))
                },
            });

    </script>
{% endblock %}